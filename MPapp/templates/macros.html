{% macro fastq_uploader() -%}

    <div class="card border-dark">
        <div class="card-header bg-dark text-white text-center">
            FASTQ input
        </div>
        <div class="card-body">
            <p class="card-text">
                
            </p>
            <form method="post" enctype=multipart/form-data>
                <div class="form-group pt-2">
                    <label for="file1"><b>FASTQ file 1:</b></label>
                    <input type="file" name="file1" class="form-control-file" id="file1">
                    <hr>
                    <label for="file2"><b>FASTQ file 2:</b></label>
                    <input type="file" name="file2" class="form-control-file" id="file2">
                </div>
                <hr>
                <div class="justify-content-center text-center">
                    <button type="submit" class="btn btn-success" name="fastq_submit" id="fastq_submit" onclick="$('#loading').show();">Submit</button>
                </div>
            </form>
        </div>
    </div>

{%- endmacro %}

{% macro bam_uploader() -%}

    <div class="card border-dark">
        <div class="card-header bg-dark text-white text-center">
            BAM input
        </div>
        <div class="card-body">
            <p class="card-text">
   
            </p>
            <form method="post" enctype=multipart/form-data>
                <div class="form-group pt-2">
                    <label for="bam"><b>Upload file:</b></label>
                    <input type="file" name="bam" class="form-control-file" id="bam">
                </div>
                <hr>
                <div class="justify-content-center text-center">
                    <button type="submit" class="btn btn-success" name="bam_submit" id="bam_submit">Submit</button>
                </div>
            </form>
        </div>
    </div>

{%- endmacro %}

{% macro file_dropper(random_id) -%}

    <div class="card border-dark">
        <div class="card-header bg-dark text-white text-center">
            BAM input
        </div>
        <div class="card-body">
            <p class="card-text">
                Please drop your files in here and click submit when done.
            </p>
            <form method="POST" action='{{ url_for("main.file_upload",upload_id=random_id) }}' class="dropzone dz-clickable" 
                id="dropper" enctype="multipart/form-data">
            </form>
            <div class="pt-2">
                <form method="post" enctype=multipart/form-data>
                    <button type="submit" class="btn btn-success" name="submit_button" value="{{random_id}}" id="bam_submit">Submit</button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.1/min/dropzone.min.js"></script>

    <script type="application/javascript">
        Dropzone.options.dropper = {
            paramName: 'file',
            chunking: true,
            forceChunking: true,
            url: '{{ url_for("main.file_upload", upload_id=random_id) }}',
            maxFilesize: 5000, // megabytes
            chunkSize: 100000000, // bytes
            timeout: 0
        }	
    </script>

{%- endmacro %}


{% macro result_retriever() -%}

    <div class="card border-dark">
        <div class="card-header bg-dark text-white text-center">
            Retrieve results
        </div>
        <div class="card-body">
            <p class="card-text">
                Find your results by entering your unique <b>Result ID</b> directly into
                the search box below.
            </p>
            <form method="post" enctype=multipart/form-data>
                <div class="row justify-content-center text-center">                
                    <div class="form-group mb-0">
                        <input type="text" name="result_id" class="form-control" placeholder="Result ID">
                    </div>
                </div>

                <hr>
                <div class="justify-content-center text-center">
                    <button type="submit" id="result_submit" name="result_submit", class="btn btn-success">Submit</button>
                </div>
            </form>
        </div>
    </div>

{%- endmacro %}

{% macro description() -%}

<div class="card border-dark">
    <div class="card-header bg-dark text-white text-center">
        File input
    </div>
    <div class="card-body">
        <p class="card-text">
            You can upload two (forward and reverse) fastq files or one bam file. Allowed extensions (<b>.fastq, fastq.gz, fq, fq.gz, bam</b>).
            When you upload your data, the run will be be assigned a unique <b>Result ID</b>. Please take a note of ID once it appears as it is required to
            find your results later.
        </p>
    </div>
</div>
{%- endmacro %}
